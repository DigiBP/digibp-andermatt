<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="Definitions_11u7hb5" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="3.0.0-beta.2">
  <bpmn:collaboration id="Collaboration_11h9dju">
    <bpmn:participant id="Participant_1ap8y14" name="&#34;Just-me&#34; order handling process" processRef="Process_Suggestions" />
  </bpmn:collaboration>
  <bpmn:process id="Process_Suggestions" isExecutable="true">
    <bpmn:laneSet id="LaneSet_0icouuo">
      <bpmn:lane id="Lane_1e4sb46" name="&#34;Just-me&#34; office agent">
        <bpmn:flowNodeRef>StartEvent_13v9fcb</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_0fkt3mh</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_198xkod</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_02ow78w</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>EndEvent_06on66u</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_0icwc08</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>ExclusiveGateway_0f1wzoo</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>ExclusiveGateway_0r69i3t</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_1wiqpip</bpmn:flowNodeRef>
      </bpmn:lane>
    </bpmn:laneSet>
    <bpmn:startEvent id="StartEvent_13v9fcb" name="Preferences received">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="color" label="color" type="string" />
          <camunda:formField id="clothing" label="clothing" type="string" />
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:outgoing>SequenceFlow_0bvkagu</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:sequenceFlow id="SequenceFlow_0bvkagu" sourceRef="StartEvent_13v9fcb" targetRef="Task_0fkt3mh" />
    <bpmn:businessRuleTask id="Task_0fkt3mh" name="Determine production partner" camunda:resultVariable="result" camunda:decisionRef="Decision_1t4d49w" camunda:mapDecisionResult="singleResult">
      <bpmn:incoming>SequenceFlow_0bvkagu</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0iiitpf</bpmn:outgoing>
    </bpmn:businessRuleTask>
    <bpmn:sequenceFlow id="SequenceFlow_0iiitpf" sourceRef="Task_0fkt3mh" targetRef="Task_0icwc08" />
    <bpmn:serviceTask id="Task_198xkod" name="Lookup clothing" camunda:class="ch.fhnw.digibp.ClothingLookup">
      <bpmn:incoming>SequenceFlow_189qqhh</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_16c9ic7</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:receiveTask id="Task_02ow78w" name="Wait for variable pickup" messageRef="Message_16p7eac">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:outputParameter name="awaitingMessage">true</camunda:outputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_16c9ic7</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1v8trfu</bpmn:outgoing>
    </bpmn:receiveTask>
    <bpmn:endEvent id="EndEvent_06on66u" name="Suggestions chosen">
      <bpmn:incoming>SequenceFlow_1v8trfu</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="SequenceFlow_16c9ic7" sourceRef="Task_198xkod" targetRef="Task_02ow78w" />
    <bpmn:sequenceFlow id="SequenceFlow_1v8trfu" sourceRef="Task_02ow78w" targetRef="EndEvent_06on66u" />
    <bpmn:scriptTask id="Task_0icwc08" name="Process result variables" scriptFormat="javascript">
      <bpmn:incoming>SequenceFlow_0iiitpf</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1dxzqte</bpmn:outgoing>
      <bpmn:script>execution.setVariable("producer", result.producer);
execution.setVariable("partner", result.partner);</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:exclusiveGateway id="ExclusiveGateway_0r69i3t">
      <bpmn:incoming>SequenceFlow_1pi0rgj</bpmn:incoming>
      <bpmn:incoming>SequenceFlow_0yyuej7</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_189qqhh</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="SequenceFlow_189qqhh" sourceRef="ExclusiveGateway_0r69i3t" targetRef="Task_198xkod" />
    <bpmn:sequenceFlow id="SequenceFlow_1pi0rgj" sourceRef="Task_1wiqpip" targetRef="ExclusiveGateway_0r69i3t" />
    <bpmn:exclusiveGateway id="ExclusiveGateway_0f1wzoo" name="Massmarket but no definite partner?">
      <bpmn:incoming>SequenceFlow_1dxzqte</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0yyuej7</bpmn:outgoing>
      <bpmn:outgoing>SequenceFlow_0krv67h</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="SequenceFlow_0yyuej7" name="no" sourceRef="ExclusiveGateway_0f1wzoo" targetRef="ExclusiveGateway_0r69i3t">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression" language="javascript">out=!(producer.contains("Massmarket") &amp;&amp; partner == null)</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_0krv67h" name="yes" sourceRef="ExclusiveGateway_0f1wzoo" targetRef="Task_1wiqpip">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression" language="javascript">out=(producer.contains("Massmarket") &amp;&amp; partner == null)</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_1dxzqte" sourceRef="Task_0icwc08" targetRef="ExclusiveGateway_0f1wzoo" />
    <bpmn:serviceTask id="Task_1wiqpip" name="Lookup massmarket partner">
      <bpmn:extensionElements>
        <camunda:connector>
          <camunda:inputOutput>
            <camunda:inputParameter name="url">https://hook.integromat.com/7fgol1711x9qb1kpo1032pb42yfagu9n</camunda:inputParameter>
            <camunda:inputParameter name="method">POST</camunda:inputParameter>
            <camunda:inputParameter name="headers">
              <camunda:map>
                <camunda:entry key="Content-Type">application/json</camunda:entry>
              </camunda:map>
            </camunda:inputParameter>
            <camunda:outputParameter name="partner">
              <camunda:script scriptFormat="javascript">object=JSON.parse(response);
partner=object.partnerList;</camunda:script>
            </camunda:outputParameter>
          </camunda:inputOutput>
          <camunda:connectorId>http-connector</camunda:connectorId>
        </camunda:connector>
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_0krv67h</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1pi0rgj</bpmn:outgoing>
    </bpmn:serviceTask>
  </bpmn:process>
  <bpmn:message id="Message_16p7eac" name="WaitMessage" />
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Collaboration_11h9dju">
      <bpmndi:BPMNShape id="Participant_1ap8y14_di" bpmnElement="Participant_1ap8y14" isHorizontal="true">
        <dc:Bounds x="156" y="59" width="1210" height="293" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_1e4sb46_di" bpmnElement="Lane_1e4sb46" isHorizontal="true">
        <dc:Bounds x="186" y="59" width="1180" height="293" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0bvkagu_di" bpmnElement="SequenceFlow_0bvkagu">
        <di:waypoint x="272" y="190" />
        <di:waypoint x="312" y="190" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="StartEvent_0sl06bj_di" bpmnElement="StartEvent_13v9fcb">
        <dc:Bounds x="236" y="172" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="224" y="215" width="60" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BusinessRuleTask_1cp99go_di" bpmnElement="Task_0fkt3mh">
        <dc:Bounds x="312" y="150" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ServiceTask_141954o_di" bpmnElement="Task_198xkod">
        <dc:Bounds x="993" y="150" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_16c9ic7_di" bpmnElement="SequenceFlow_16c9ic7">
        <di:waypoint x="1093" y="190" />
        <di:waypoint x="1132" y="190" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="EndEvent_0vgt03k_di" bpmnElement="EndEvent_06on66u">
        <dc:Bounds x="1296" y="172" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1284" y="215" width="61" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1v8trfu_di" bpmnElement="SequenceFlow_1v8trfu">
        <di:waypoint x="1232" y="190" />
        <di:waypoint x="1296" y="190" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ReceiveTask_1qktdrq_di" bpmnElement="Task_02ow78w">
        <dc:Bounds x="1132" y="150" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0iiitpf_di" bpmnElement="SequenceFlow_0iiitpf">
        <di:waypoint x="412" y="190" />
        <di:waypoint x="456" y="190" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ScriptTask_04hh9s9_di" bpmnElement="Task_0icwc08">
        <dc:Bounds x="456" y="150" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ExclusiveGateway_0r69i3t_di" bpmnElement="ExclusiveGateway_0r69i3t" isMarkerVisible="true">
        <dc:Bounds x="896" y="165" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_189qqhh_di" bpmnElement="SequenceFlow_189qqhh">
        <di:waypoint x="946" y="190" />
        <di:waypoint x="993" y="190" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1pi0rgj_di" bpmnElement="SequenceFlow_1pi0rgj">
        <di:waypoint x="841" y="117" />
        <di:waypoint x="921" y="117" />
        <di:waypoint x="921" y="165" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ExclusiveGateway_0f1wzoo_di" bpmnElement="ExclusiveGateway_0f1wzoo" isMarkerVisible="true">
        <dc:Bounds x="627" y="165" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="612" y="225" width="80" height="40" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0yyuej7_di" bpmnElement="SequenceFlow_0yyuej7">
        <di:waypoint x="677" y="190" />
        <di:waypoint x="896" y="190" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="784" y="196" width="13" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0krv67h_di" bpmnElement="SequenceFlow_0krv67h">
        <di:waypoint x="652" y="165" />
        <di:waypoint x="652" y="117" />
        <di:waypoint x="741" y="117" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="643" y="98" width="17" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1dxzqte_di" bpmnElement="SequenceFlow_1dxzqte">
        <di:waypoint x="556" y="190" />
        <di:waypoint x="627" y="190" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ServiceTask_0mb01on_di" bpmnElement="Task_1wiqpip">
        <dc:Bounds x="741" y="77" width="100" height="80" />
      </bpmndi:BPMNShape>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
